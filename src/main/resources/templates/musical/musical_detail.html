<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>

.table{
    width: 800px;
    height: 100px;
}

 #title th {
    width: 100px;
    background-color: #808080;
    color: white;
    font-weight: bold;
    text-align: center;
    border: 1px solid #dddddd;
  }


 .btn-container {
    text-align: right;
  }

   .header-btn {
        float: right;
        margin-left : 10px;
    }

</style>

<head>
    <meta charset="UTF-8">
    <title>뮤지컬 상세 정보</title>
</head>
<body>


<table class="table" style="margin-top:50px;'">


    <thead>
    <tr id="title">
        <th colspan="2" scope="col">공연명</th>
        <th scope="col">공연시작일</th>
        <th scope="col">공연종료일</th>
        <th colspan="2" scope="col">시설명</th>
        <th scope="col">유무료</th>
        <th scope="col">오픈런</th>
        <th scope="col" style="display: none;">공연번호</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td id= "musical_title" colspan="2" th:text="${list.title}"></td>
        <td th:text="${list.op_st_dt}"></td>
        <td th:text="${list.op_ed_dt}"></td>
        <td colspan="2" th:text="${list.place_nm}"></td>
        <td id="musical_pay" th:text="${list.pay_at}"></td>
        <td th:text="${list.op_at}"></td>
        <td id="musical_res_no" th:text="${list.res_no}" style="display: none;"></td>
    </tr>
    </tbody>
    <thead>
    <tr>
        <td colspan="8">
            <button id="reservation" type="button" onclick="reservation()" class="btn btn-outline-primary header-btn">예약하기</button>
            <button id="back" type="button" onclick="back()" class="btn btn-outline-primary header-btn">뒤로가기</button>
        </td>
    </tr>
    </thead>
</table>


<script>

/*
    //let title = document.querySelector('#musical_title');
    //let pay_at = document.querySelector('#musical_pay');

    let title = document.querySelector('#musical_title').textContent.trim();
    let pay_at = document.querySelector('#musical_pay').textContent.trim();


    const back = () => {
        window.close();
    }


    const reservation = () => {

    let data = {
        title : title,
        pay_at   : pay_at
    };


    $.ajax({
        type: "POST",
        url : "/musical/reservation",
        contentType : "application/json",
        data: JSON.stringify(data),
        success: function(response){
        console.log();
        },
        error: function(xhr, status, error){
            console.error('에러:', error);
        }
    }); // ajax-end

    }; // const-end

*/

    function reservation() {
    let title = document.querySelector('#musical_title').textContent.trim();
    let res_no = document.querySelector('#musical_res_no').textContent.trim();
    let pay_at = document.querySelector('#musical_pay').textContent.trim();
    window.location.href = "/musical/reservation?res_no=" + res_no + "&pay_at=" + pay_at;
    }



    const back = () => {
        window.close();
    }



</script>



</body>
</html>